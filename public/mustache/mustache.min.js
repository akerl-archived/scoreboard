(function(a){
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
(function(c,b){if(typeof exports==="object"&&exports){b(exports)}else{if(typeof define==="function"&&define.amd){define(["exports"],b)}else{b(c.Mustache={})}}}(this,function(b){var v=Object.prototype.toString;var l=Array.isArray||function(y){return v.call(y)==="[object Array]"};function c(y){return typeof y==="function"}function f(y){return y.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var h=RegExp.prototype.test;function r(z,y){return h.call(z,y)}var k=/\S/;function i(y){return !r(k,y)}var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function n(y){return String(y).replace(/[&<>"'\/]/g,function(z){return e[z]})}var g=/\s*/;var m=/\s+/;var u=/\s*=/;var o=/\s*\}/;var s=/#|\^|\/|>|\{|&|=|!/;function x(R,G){if(!R){return[]}var I=[];var H=[];var D=[];var S=false;var P=false;function O(){if(S&&!P){while(D.length){delete H[D.pop()]}}else{D=[]}S=false;P=false}var K,F,Q;function E(T){if(typeof T==="string"){T=T.split(m,2)}if(!l(T)||T.length!==2){throw new Error("Invalid tags: "+T)}K=new RegExp(f(T[0])+"\\s*");F=new RegExp("\\s*"+f(T[1]));Q=new RegExp("\\s*"+f("}"+T[1]))}E(G||b.tags);var A=new t(R);var B,z,J,M,C,y;while(!A.eos()){B=A.pos;J=A.scanUntil(K);if(J){for(var N=0,L=J.length;N<L;++N){M=J.charAt(N);if(i(M)){D.push(H.length)}else{P=true}H.push(["text",M,B,B+1]);B+=1;if(M==="\n"){O()}}}if(!A.scan(K)){break}S=true;z=A.scan(s)||"name";A.scan(g);if(z==="="){J=A.scanUntil(u);A.scan(u);A.scanUntil(F)}else{if(z==="{"){J=A.scanUntil(Q);A.scan(o);A.scanUntil(F);z="&"}else{J=A.scanUntil(F)}}if(!A.scan(F)){throw new Error("Unclosed tag at "+A.pos)}C=[z,J,B,A.pos];H.push(C);if(z==="#"||z==="^"){I.push(C)}else{if(z==="/"){y=I.pop();if(!y){throw new Error('Unopened section "'+J+'" at '+B)}if(y[1]!==J){throw new Error('Unclosed section "'+y[1]+'" at '+B)}}else{if(z==="name"||z==="{"||z==="&"){P=true}else{if(z==="="){E(J)}}}}}y=I.pop();if(y){throw new Error('Unclosed section "'+y[1]+'" at '+A.pos)}return w(d(H))}function d(D){var z=[];var B,y;for(var A=0,C=D.length;A<C;++A){B=D[A];if(B){if(B[0]==="text"&&y&&y[0]==="text"){y[1]+=B[1];y[3]=B[3]}else{z.push(B);y=B}}}return z}function w(D){var F=[];var C=F;var E=[];var z,B;for(var y=0,A=D.length;y<A;++y){z=D[y];switch(z[0]){case"#":case"^":C.push(z);E.push(z);C=z[4]=[];break;case"/":B=E.pop();B[5]=z[2];C=E.length>0?E[E.length-1][4]:F;break;default:C.push(z)}}return F}function t(y){this.string=y;this.tail=y;this.pos=0}t.prototype.eos=function(){return this.tail===""};t.prototype.scan=function(A){var z=this.tail.match(A);if(!z||z.index!==0){return""}var y=z[0];this.tail=this.tail.substring(y.length);this.pos+=y.length;return y};t.prototype.scanUntil=function(A){var z=this.tail.search(A),y;switch(z){case -1:y=this.tail;this.tail="";break;case 0:y="";break;default:y=this.tail.substring(0,z);this.tail=this.tail.substring(z)}this.pos+=y.length;return y};function q(z,y){this.view=z==null?{}:z;this.cache={".":this.view};this.parent=y}q.prototype.push=function(y){return new q(y,this)};q.prototype.lookup=function(A){var y=this.cache;var C;if(A in y){C=y[A]}else{var B=this,D,z;while(B){if(A.indexOf(".")>0){C=B.view;D=A.split(".");z=0;while(C!=null&&z<D.length){C=C[D[z++]]}}else{C=B.view[A]}if(C!=null){break}B=B.parent}y[A]=C}if(c(C)){C=C.call(this.view)}return C};function p(){this.cache={}}p.prototype.clearCache=function(){this.cache={}};p.prototype.parse=function(A,z){var y=this.cache;var B=y[A];if(B==null){B=y[A]=x(A,z)}return B};p.prototype.render=function(B,y,A){var C=this.parse(B);var z=(y instanceof q)?y:new q(y);return this.renderTokens(C,z,A,B)};p.prototype.renderTokens=function(G,y,E,J){var C="";var K=this;function z(L){return K.render(L,y,E)}var A,H;for(var D=0,F=G.length;D<F;++D){A=G[D];switch(A[0]){case"#":H=y.lookup(A[1]);if(!H){continue}if(l(H)){for(var B=0,I=H.length;B<I;++B){C+=this.renderTokens(A[4],y.push(H[B]),E,J)}}else{if(typeof H==="object"||typeof H==="string"){C+=this.renderTokens(A[4],y.push(H),E,J)}else{if(c(H)){if(typeof J!=="string"){throw new Error("Cannot use higher-order sections without the original template")}H=H.call(y.view,J.slice(A[3],A[5]),z);if(H!=null){C+=H}}else{C+=this.renderTokens(A[4],y,E,J)}}}break;case"^":H=y.lookup(A[1]);if(!H||(l(H)&&H.length===0)){C+=this.renderTokens(A[4],y,E,J)}break;case">":if(!E){continue}H=c(E)?E(A[1]):E[A[1]];if(H!=null){C+=this.renderTokens(this.parse(H),y,E,H)}break;case"&":H=y.lookup(A[1]);if(H!=null){C+=H}break;case"name":H=y.lookup(A[1]);if(H!=null){C+=b.escape(H)}break;case"text":C+=A[1];break}}return C};b.name="mustache.js";b.version="0.8.1";b.tags=["{{","}}"];var j=new p();b.clearCache=function(){return j.clearCache()};b.parse=function(z,y){return j.parse(z,y)};b.render=function(A,y,z){return j.render(A,y,z)};b.to_html=function(B,z,A,C){var y=b.render(B,z,A);if(c(C)){C(y)}else{return y}};b.escape=n;b.Scanner=t;b.Context=q;b.Writer=p}));a.mustache=function(d,b,c){return Mustache.render(d,b,c)};a.fn.mustache=function(b,c){return a(this).map(function(e,g){var f=a.trim(a(g).html());var d=a.mustache(f,b,c);return a(d).get()})}})(jQuery);