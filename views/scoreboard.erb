<div id='scoreboard'>
</div>
<script type="text/javascript" src="/js/jquery-1.10.2.min.js"></script>
<script>

function handle_followers(followers) {
    for (var id in followers) {
        add_player(followers[id]);
    }
}

function add_player(user) {
    $.ajax({url:'/' + user + '/stats', success:function(stats){
        create_row(user, stats.score);
        show_score(user, stats.score);
    }});
}

function create_row(user, score) {
    //<div class="player player_one">
    //    <div class="name"><h3><%= @player_one %></h3></div>
    //    <div class="score"></div>
    //</div>

    var board = document.getElementById('scoreboard');
    var new_row = document.createElement('div');
    new_row.className = "player";
    board.appendChild(new_row);

    var name_div = document.createElement('div');
    name_div.className = "score";
    name_div.innerHTML = "<h3>" + user + "</h3>";
    new_row.appendChild(name_div);

    var score_div = document.createElement('div');
    score_div.className = "score";
    score_div.innerHTML = score;
    new_row.appendChild(score_div);
}

function show_score(user, score) {
}

function set_player_one(user,score) {
    var player_one_row = document.getElementById('scoreboard').childNodes[1];
    player_one_row.className = "player_one";
}

$(document).ready(function(){
    var player_one = '<%= @player_one %>';
    add_player(player_one);
    $.ajax({url:'/<%= @player_one %>/following', success:handle_followers});
});
</script>
